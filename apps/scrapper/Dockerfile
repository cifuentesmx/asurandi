FROM node:20-slim 

WORKDIR /app

ARG PORT=3000
ENV PORT=${PORT}

RUN npm i -g pnpm
COPY ./dist .
COPY ./package.json .


RUN pnpm i
# RUN pnpm build


ARG CW_URL
ARG CW_BOT_ID
ARG CW_BOT_TOKEN
ARG CW_PLATFORM_APP
ARG CW_SERVER_IP
ARG PORT=3000
ARG RABBIT_CONECCTION_STRING
ARG RABBIT_INCOMING_QUEUE
ARG MAX_INTENTS
ARG CF_IP_HEADER
ARG FIREBASE_PROJECT_ID
ARG FIREBASE_ADMIN_CLIENT_EMAIL
ARG FIREBASE_ADMIN_PRIVATE_KEY
ARG FIREBASE_CONNECT_EMULATORS


EXPOSE $PORT

CMD ["node", "index.js"] 
